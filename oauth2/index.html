<html>
<head>
<title>JQuery OAuth Sample</title>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
</head>

<body>

<script type="text/javascript">
	
var accessToken;

function setAccessToken() {
	hash = location.hash;
	if (hash) {
      accessToken = hash.match(/[?&#]access_token=([^&]*)?/)[1];
      if (accessToken){
        sessionStorage.setItem( 'accessToken', accessToken );
      }
    } else {
    	accessToken = sessionStorage.getItem('accessToken');
    }
    
    $.ajaxSetup({
        headers: {
          'Authorization': "Bearer " + accessToken
        }
      });
}

function requestResource() {
    setAccessToken();
    
  if(accessToken){
    $("token").text(accessToken);

    $.ajax({
        url:'https://i-3673ff04.workdaysuv.com/ccx/api/v1/oms/countries',
        dataType: "json",
        success:function(response) {
            $("data").text(response.total);
        },
        error: function(jqXHR, textStatus, errorThrown){
            sessionStorage.removeItem( 'accessToken');
        }
    });
  }
}

$(document).ready(function() {
    setAccessToken();
	requestResource();
});
 
</script>
<a href='https://i-3673ff04.workdaysuv.com/oms/authorize?response_type=token&client_id=YWI1MTlhZWEtZTgwNy00ZjM3LWJiZWUtZWFkZmNkMzQ4YmJh'>Sign In</a>
<div><b>Token:</b> <token/></div>
<div><b>Data:</b> <data/></div>
 
</body>
</html>